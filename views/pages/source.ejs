<!DOCTYPE html>
<html lang="en">
<head>
    <%- include("../partials/head"); %>
    <link href="/css/source.css" rel="stylesheet" type="text/css">
</head>
<body class="container">

<%- include("../partials/header", { selectedTab: "sources" }); %>

<!-- Uses EJS var sourceData and overwritesData to render the provided source and all overwrites dynamically -->

<main>
    <br>
    <div class="row">
        <!-- <div class="input-field col s12 m12 l5">
            <select class="">
                <option value="original" selected>Original Version<span class="new badge">2 Overwrites</span></option>
                <option value="98765">First Overwrite (Parody)</option>
                <option value="98765">Second Overwrite (Kid-Friendly)</option>
            </select>
            <label>Select a version of the text</label>
        </div> -->


        <div class="col s12">   
            <ul id="version-dropdown" class="dropdown-content">
                <li><a href="#!">Original Version<span class="new badge">2</span></a></li>
                <li><a href="#!">First Overwrite (Parody)</a></li>
                <li><a href="#!">Second Overwrite (Kid-Friendly)</a></li>
            </ul>
            <a class="btn dropdown-trigger waves-light teal" href="#!" data-target="version-dropdown">Select a version<i class="material-icons right">arrow_drop_down</i></a>        
    
            <!-- TODO: Handle action via JavaScript: POST /library/add?sourceId=12345 -->
            <a class="btn waves-effect waves-light teal hoverable"><i class="material-icons left">library_add</i>Add to Library</a>

            <!-- onclick="onOverwriteThis()" -->
            <!-- /overwrites/add?sourceId=<%- sourceData.id %> -->
            <a href="/sources/<%- sourceData.id %>/overwrites/add" class="btn waves-effect waves-light teal hoverable"><i class="material-icons left">edit</i>Overwrite this</a>
        </div>
    </div>

    <div class="row">
        <div class="col s12 m12 l8">
            <h3><%- sourceData.title %></h3>
            <p>by <%- sourceData.author %></p>

            <p><%- sourceData.text_html %></p>
        </div>
    </div>

</main>

<%- include("../partials/footer"); %>

</body>

<script type="text/javascript">

document.addEventListener('DOMContentLoaded', function() {
    var elems = document.querySelectorAll('select');

    var options = {};
    var instances = M.FormSelect.init(elems, options);

    elems = document.querySelectorAll('.dropdown-trigger');
    instances = M.Dropdown.init(elems, options);
});

</script>

</html>